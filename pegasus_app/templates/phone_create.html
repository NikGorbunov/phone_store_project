{% extends 'pegasus_app/base.html' %}

{% block body %}
<style>
        .dropdown-toggle::after {
            margin-left: 7.255em;
        }

        .schedule_time-input {
           margin-bottom: 5px;
           padding: 4px 10px 4px 10px;
        }

        .phone_config-inputs {
            width: 300px;
            margin-bottom: 20px;
        }

</style>
<div style="padding: 10px 30px;
    box-shadow: rgb(0 0 0 / 24%) 0px 3px 8px;
    margin: 10px;
    overflow: hidden;
    height: 100vh;">
    <div class="d-flex" style="align-items: center;">
        <h1 style="margin-right: 80px">Verify Phone</h1>
        <div class="dropdown">
            <button class="dropdown-toggle" type="button" data-bs-toggle="dropdown"
                    aria-expanded="false" style="background: white; border: rgba(0, 0, 0, 0.175) solid; border-radius: 0.375rem; padding: 10px;">
                Call check
            </button>
            <ul class="dropdown-menu">
                {% for phone in phones_data %}
                <li><a class="dropdown-item" href="{% url 'phone_edit' phone.id %}">{{ phone.number }}</a></li>
                {% endfor %}
                <li><a class="dropdown-item" href="{% url 'phone_create' %}">Add new Phone</a></li>
            </ul>
        </div>
    </div>
    {% if phones_data|length >= max_count_numbers %}
        <h1 style="list-style: none">ERROR!!!</h1>
        {% else %}
            <form action="." method="post">
        {% csrf_token %}

        <div class="d-flex" style="margin-bottom: 10px;">
            <h5 style="margin: 0 10px 0 0;">Enable</h5>
            <input type="checkbox">
        </div>

        <div class="d-flex flex-column">
            <label>{{ phone_form.ima_name.label }}</label>
            {{ phone_form.ima_name }}
            <label>{{ phone_form.number.label }}</label>
            {{ phone_form.number }}
            {{ phone_form.number.errors }}
            <div class="d-flex" style="justify-content: space-between; margin-bottom: 20px;">
                <div>
                    <label>{{ phone_form.failure_threshold.label }}</label>
                    {{ phone_form.failure_threshold }}

                </div>
                <output name="output_failure_threshold" id="id_output_failure_threshold">Notify after 4 failures
                </output>
            </div>
            <div class="d-flex" style="justify-content: space-between; margin-bottom: 20px;">
                <div>
                    <label>{{ phone_form.test_frequency.label }}</label>
                    {{ phone_form.test_frequency }}

                </div>
                <output name="output_test_frequency" id="id_output_test_frequency">Check every 10 minutes (10 to
                    120)
                </output>
            </div>
        </div>

        {{ phone_form.numbers.errors }}

        <hr>


        <h4>Scheduling</h4>
        <div class="d-flex" style="justify-content: space-between; overflow: hidden;">
            {{ schedule_formset.management_form }}
            {% for form in schedule_formset %}
            <div class="d-flex" style="flex-direction: column;  align-items: center;">
                {{ form.id }}
                <p hidden>{{ form.day }}</p>
                {{ form.day.value|capfirst }}
                {{ form.is_active }}
                <label style="margin-left: -60px;">{{ form.open_time.label }}</label>
                {{ form.open_time }}
                {{ form.errors.open_time }}
                <label style="margin-left: -60px;">{{ form.close_time.label }}</label>
                {{ form.close_time }}
                {{ form.errors.close_time }}
            </div>
            {% endfor %}
        </div>


        <input type="submit" class="btn btn-primary" style="background: #6f00cc; padding: 7px 15px 7px 15px;"
               value="SUBMIT">

    </form>

    {% endif %}

</div>
{% endblock %}